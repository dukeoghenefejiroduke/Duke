{"version":3,"names":["NativeModules","PorcupineErrors","RCTPorcupine","PvPorcupine","Porcupine","getAvailableDevices","err","PorcupineError","nativeError","codeToError","code","message","fromBuiltInKeywords","accessKey","keywords","modelPath","arguments","length","undefined","device","sensitivities","handle","frameLength","sampleRate","version","Object","values","fromKeywordPaths","keywordPaths","constructor","_defineProperty","_handle","_frameLength","_sampleRate","_version","process","frame","PorcupineInvalidArgumentError","Number","isInteger","delete","PorcupineMemoryError","PorcupineIOError","PorcupineStopIterationError","PorcupineKeyError","PorcupineInvalidStateError","PorcupineRuntimeError","PorcupineActivationError","PorcupineActivationLimitError","PorcupineActivationThrottledError","PorcupineActivationRefusedError","Error"],"sources":["porcupine.tsx"],"sourcesContent":["//\n// Copyright 2020-2025 Picovoice Inc.\n//\n// You may not use this file except in compliance with the license. A copy of the license is located in the \"LICENSE\"\n// file accompanying this source.\n//\n// Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on\n// an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the\n// specific language governing permissions and limitations under the License.\n//\n\nimport { NativeModules } from 'react-native';\nimport * as PorcupineErrors from './porcupine_errors';\nimport type BuiltInKeywords from './builtin_keywords';\n\nconst RCTPorcupine = NativeModules.PvPorcupine;\n\ntype NativeError = {\n  code: string;\n  message: string;\n};\n\nclass Porcupine {\n  private _handle: string;\n  private _frameLength: number;\n  private _sampleRate: number;\n  private _version: string;\n\n  /**\n   * Gets all available devices that Porcupine can use for inference. Each entry in the list can be the `device` argument\n   * of the constructor.\n   *\n   * @returns Array of all available devices that Porcupine can use for inference.\n   */\n  public static async getAvailableDevices() {\n    try {\n      return await RCTPorcupine.getAvailableDevices();\n    } catch (err) {\n      if (err instanceof PorcupineErrors.PorcupineError) {\n        throw err;\n      } else {\n        const nativeError = err as NativeError;\n        throw this.codeToError(nativeError.code, nativeError.message);\n      }\n    }\n  }\n\n  /**\n   * Static creator for initializing Porcupine from one of the built-in keywords\n   * @param accessKey AccessKey obtained from Picovoice Console (https://console.picovoice.ai/.\n   * @param keywords List of keywords (phrases) for detection. The list of available (default) keywords can be retrieved\n   * using `Porcupine.KEYWORDS`. If `keyword_paths` is set then this argument will be ignored.\n   * @param modelPath Path to the file containing model parameters. If not set it will be set to the default location.\n   * @param device String representation of the device (e.g., CPU or GPU) to use for inference.\n   * If set to `best`, the most suitable device is selected automatically. If set to `gpu`, the engine uses the\n   * first available GPU device. To select a specific GPU device, set this argument to `gpu:${GPU_INDEX}`, where\n   * `${GPU_INDEX}` is the index of the target GPU. If set to `cpu`, the engine will run on the CPU with the\n   * default number of threads. To specify the number of threads, set this argument to `cpu:${NUM_THREADS}`,\n   * where `${NUM_THREADS}` is the desired number of threads.\n   * @param sensitivities sensitivities for each keywords model. A higher sensitivity reduces miss rate\n   * at the cost of potentially higher false alarm rate. Sensitivity should be a floating-point number within\n   * [0, 1].\n   * @returns An instance of the engine.\n   */\n  public static async fromBuiltInKeywords(\n    accessKey: string,\n    keywords: BuiltInKeywords[],\n    modelPath: string = '',\n    device: string = '',\n    sensitivities: number[] = []\n  ) {\n    try {\n      let { handle, frameLength, sampleRate, version } =\n        await RCTPorcupine.fromBuiltInKeywords(\n          accessKey,\n          modelPath,\n          device,\n          Object.values(keywords),\n          sensitivities\n        );\n      return new Porcupine(handle, frameLength, sampleRate, version);\n    } catch (err) {\n      if (err instanceof PorcupineErrors.PorcupineError) {\n        throw err;\n      } else {\n        const nativeError = err as NativeError;\n        throw this.codeToError(nativeError.code, nativeError.message);\n      }\n    }\n  }\n\n  /**\n   * Static creator for initializing Porcupine from a list of paths to custom keyword files\n   * @param accessKey AccessKey obtained from Picovoice Console (https://console.picovoice.ai/).\n   * @param keywordPaths Absolute paths to keyword model files.\n   * @param modelPath Path to the file containing model parameters. If not set it will be set to the default location.\n   * @param device String representation of the device (e.g., CPU or GPU) to use for inference.\n   * If set to `best`, the most suitable device is selected automatically. If set to `gpu`, the engine uses the\n   * first available GPU device. To select a specific GPU device, set this argument to `gpu:${GPU_INDEX}`, where\n   * `${GPU_INDEX}` is the index of the target GPU. If set to `cpu`, the engine will run on the CPU with the\n   * default number of threads. To specify the number of threads, set this argument to `cpu:${NUM_THREADS}`,\n   * where `${NUM_THREADS}` is the desired number of threads.\n   * @param sensitivities sensitivities for each keywords model. A higher sensitivity reduces miss rate\n   * at the cost of potentially higher false alarm rate. Sensitivity should be a floating-point number within\n   * [0, 1].\n   * @returns An instance of the engine.\n   */\n  public static async fromKeywordPaths(\n    accessKey: string,\n    keywordPaths: string[],\n    modelPath: string = '',\n    device: string = '',\n    sensitivities: number[] = []\n  ) {\n    try {\n      let { handle, frameLength, sampleRate, version } =\n        await RCTPorcupine.fromKeywordPaths(\n          accessKey,\n          modelPath,\n          device,\n          keywordPaths,\n          sensitivities\n        );\n      return new Porcupine(handle, frameLength, sampleRate, version);\n    } catch (err) {\n      if (err instanceof PorcupineErrors.PorcupineError) {\n        throw err;\n      } else {\n        const nativeError = err as NativeError;\n        throw this.codeToError(nativeError.code, nativeError.message);\n      }\n    }\n  }\n\n  private constructor(\n    handle: string,\n    frameLength: number,\n    sampleRate: number,\n    version: string\n  ) {\n    this._handle = handle;\n    this._frameLength = frameLength;\n    this._sampleRate = sampleRate;\n    this._version = version;\n  }\n\n  /**\n   * Process a frame of audio with the wake word engine.\n   * @param frame A frame of audio samples to be assessed by Porcupine. The required audio format is found by\n   * calling `.sampleRate` to get the required sample rate and `.frameLength` to get the required frame size.\n   * Audio must be single-channel and 16-bit linearly-encoded.\n   * @returns {Promise} Index of the detected keyword, or -1 if no detection occurred\n   */\n  async process(frame: number[]) {\n    if (frame === undefined) {\n      throw new PorcupineErrors.PorcupineInvalidArgumentError(\n        'Frame array provided to process() is undefined or null'\n      );\n    } else if (frame.length !== this._frameLength) {\n      throw new PorcupineErrors.PorcupineInvalidArgumentError(\n        `Size of frame array provided to 'process' (${frame.length}) does not match the engine 'frameLength' (${this._frameLength})`\n      );\n    }\n\n    // sample the first frame to check for non-integer values\n    if (!Number.isInteger(frame[0])) {\n      throw new PorcupineErrors.PorcupineInvalidArgumentError(\n        `Non-integer frame values provided to process(): ${frame[0]}. Porcupine requires 16-bit integers`\n      );\n    }\n\n    try {\n      return await RCTPorcupine.process(this._handle, frame);\n    } catch (err) {\n      const nativeError = err as NativeError;\n      throw Porcupine.codeToError(nativeError.code, nativeError.message);\n    }\n  }\n\n  /**\n   * Frees memory that was allocated for Porcupine\n   */\n  async delete() {\n    return RCTPorcupine.delete(this._handle);\n  }\n\n  /**\n   * Gets the required number of audio samples per frame.\n   * @returns Required frame length.\n   */\n  get frameLength() {\n    return this._frameLength;\n  }\n\n  /**\n   * Get the audio sample rate required by Porcupine.\n   * @returns Required sample rate.\n   */\n  get sampleRate() {\n    return this._sampleRate;\n  }\n\n  /**\n   * Gets the version number of the Porcupine library.\n   * @returns Version of Porcupine\n   */\n  get version() {\n    return this._version;\n  }\n\n  /**\n   * Gets the Error type given a code.\n   * @param code Code name of native Error.\n   * @param message Detailed message of the error.\n   */\n  private static codeToError(code: string, message: string) {\n    switch (code) {\n      case 'PorcupineException':\n        return new PorcupineErrors.PorcupineError(message);\n      case 'PorcupineMemoryException':\n        return new PorcupineErrors.PorcupineMemoryError(message);\n      case 'PorcupineIOException':\n        return new PorcupineErrors.PorcupineIOError(message);\n      case 'PorcupineInvalidArgumentException':\n        return new PorcupineErrors.PorcupineInvalidArgumentError(message);\n      case 'PorcupineStopIterationException':\n        return new PorcupineErrors.PorcupineStopIterationError(message);\n      case 'PorcupineKeyException':\n        return new PorcupineErrors.PorcupineKeyError(message);\n      case 'PorcupineInvalidStateException':\n        return new PorcupineErrors.PorcupineInvalidStateError(message);\n      case 'PorcupineRuntimeException':\n        return new PorcupineErrors.PorcupineRuntimeError(message);\n      case 'PorcupineActivationException':\n        return new PorcupineErrors.PorcupineActivationError(message);\n      case 'PorcupineActivationLimitException':\n        return new PorcupineErrors.PorcupineActivationLimitError(message);\n      case 'PorcupineActivationThrottledException':\n        return new PorcupineErrors.PorcupineActivationThrottledError(message);\n      case 'PorcupineActivationRefusedException':\n        return new PorcupineErrors.PorcupineActivationRefusedError(message);\n      default:\n        throw new Error(`unexpected code: ${code}, message: ${message}`);\n    }\n  }\n}\n\nexport default Porcupine;\n"],"mappings":";;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASA,aAAa,QAAQ,cAAc;AAC5C,OAAO,KAAKC,eAAe,MAAM,oBAAoB;AAGrD,MAAMC,YAAY,GAAGF,aAAa,CAACG,WAAW;AAO9C,MAAMC,SAAS,CAAC;EAMd;AACF;AACA;AACA;AACA;AACA;EACE,aAAoBC,mBAAmBA,CAAA,EAAG;IACxC,IAAI;MACF,OAAO,MAAMH,YAAY,CAACG,mBAAmB,CAAC,CAAC;IACjD,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZ,IAAIA,GAAG,YAAYL,eAAe,CAACM,cAAc,EAAE;QACjD,MAAMD,GAAG;MACX,CAAC,MAAM;QACL,MAAME,WAAW,GAAGF,GAAkB;QACtC,MAAM,IAAI,CAACG,WAAW,CAACD,WAAW,CAACE,IAAI,EAAEF,WAAW,CAACG,OAAO,CAAC;MAC/D;IACF;EACF;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACE,aAAoBC,mBAAmBA,CACrCC,SAAiB,EACjBC,QAA2B,EAI3B;IAAA,IAHAC,SAAiB,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,EAAE;IAAA,IACtBG,MAAc,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,EAAE;IAAA,IACnBI,aAAuB,GAAAJ,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,EAAE;IAE5B,IAAI;MACF,IAAI;QAAEK,MAAM;QAAEC,WAAW;QAAEC,UAAU;QAAEC;MAAQ,CAAC,GAC9C,MAAMtB,YAAY,CAACU,mBAAmB,CACpCC,SAAS,EACTE,SAAS,EACTI,MAAM,EACNM,MAAM,CAACC,MAAM,CAACZ,QAAQ,CAAC,EACvBM,aACF,CAAC;MACH,OAAO,IAAIhB,SAAS,CAACiB,MAAM,EAAEC,WAAW,EAAEC,UAAU,EAAEC,OAAO,CAAC;IAChE,CAAC,CAAC,OAAOlB,GAAG,EAAE;MACZ,IAAIA,GAAG,YAAYL,eAAe,CAACM,cAAc,EAAE;QACjD,MAAMD,GAAG;MACX,CAAC,MAAM;QACL,MAAME,WAAW,GAAGF,GAAkB;QACtC,MAAM,IAAI,CAACG,WAAW,CAACD,WAAW,CAACE,IAAI,EAAEF,WAAW,CAACG,OAAO,CAAC;MAC/D;IACF;EACF;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACE,aAAoBgB,gBAAgBA,CAClCd,SAAiB,EACjBe,YAAsB,EAItB;IAAA,IAHAb,SAAiB,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,EAAE;IAAA,IACtBG,MAAc,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,EAAE;IAAA,IACnBI,aAAuB,GAAAJ,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,EAAE;IAE5B,IAAI;MACF,IAAI;QAAEK,MAAM;QAAEC,WAAW;QAAEC,UAAU;QAAEC;MAAQ,CAAC,GAC9C,MAAMtB,YAAY,CAACyB,gBAAgB,CACjCd,SAAS,EACTE,SAAS,EACTI,MAAM,EACNS,YAAY,EACZR,aACF,CAAC;MACH,OAAO,IAAIhB,SAAS,CAACiB,MAAM,EAAEC,WAAW,EAAEC,UAAU,EAAEC,OAAO,CAAC;IAChE,CAAC,CAAC,OAAOlB,GAAG,EAAE;MACZ,IAAIA,GAAG,YAAYL,eAAe,CAACM,cAAc,EAAE;QACjD,MAAMD,GAAG;MACX,CAAC,MAAM;QACL,MAAME,WAAW,GAAGF,GAAkB;QACtC,MAAM,IAAI,CAACG,WAAW,CAACD,WAAW,CAACE,IAAI,EAAEF,WAAW,CAACG,OAAO,CAAC;MAC/D;IACF;EACF;EAEQkB,WAAWA,CACjBR,MAAc,EACdC,WAAmB,EACnBC,UAAkB,EAClBC,OAAe,EACf;IAAAM,eAAA;IAAAA,eAAA;IAAAA,eAAA;IAAAA,eAAA;IACA,IAAI,CAACC,OAAO,GAAGV,MAAM;IACrB,IAAI,CAACW,YAAY,GAAGV,WAAW;IAC/B,IAAI,CAACW,WAAW,GAAGV,UAAU;IAC7B,IAAI,CAACW,QAAQ,GAAGV,OAAO;EACzB;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;EACE,MAAMW,OAAOA,CAACC,KAAe,EAAE;IAC7B,IAAIA,KAAK,KAAKlB,SAAS,EAAE;MACvB,MAAM,IAAIjB,eAAe,CAACoC,6BAA6B,CACrD,wDACF,CAAC;IACH,CAAC,MAAM,IAAID,KAAK,CAACnB,MAAM,KAAK,IAAI,CAACe,YAAY,EAAE;MAC7C,MAAM,IAAI/B,eAAe,CAACoC,6BAA6B,CACpD,8CAA6CD,KAAK,CAACnB,MAAO,8CAA6C,IAAI,CAACe,YAAa,GAC5H,CAAC;IACH;;IAEA;IACA,IAAI,CAACM,MAAM,CAACC,SAAS,CAACH,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE;MAC/B,MAAM,IAAInC,eAAe,CAACoC,6BAA6B,CACpD,mDAAkDD,KAAK,CAAC,CAAC,CAAE,sCAC9D,CAAC;IACH;IAEA,IAAI;MACF,OAAO,MAAMlC,YAAY,CAACiC,OAAO,CAAC,IAAI,CAACJ,OAAO,EAAEK,KAAK,CAAC;IACxD,CAAC,CAAC,OAAO9B,GAAG,EAAE;MACZ,MAAME,WAAW,GAAGF,GAAkB;MACtC,MAAMF,SAAS,CAACK,WAAW,CAACD,WAAW,CAACE,IAAI,EAAEF,WAAW,CAACG,OAAO,CAAC;IACpE;EACF;;EAEA;AACF;AACA;EACE,MAAM6B,MAAMA,CAAA,EAAG;IACb,OAAOtC,YAAY,CAACsC,MAAM,CAAC,IAAI,CAACT,OAAO,CAAC;EAC1C;;EAEA;AACF;AACA;AACA;EACE,IAAIT,WAAWA,CAAA,EAAG;IAChB,OAAO,IAAI,CAACU,YAAY;EAC1B;;EAEA;AACF;AACA;AACA;EACE,IAAIT,UAAUA,CAAA,EAAG;IACf,OAAO,IAAI,CAACU,WAAW;EACzB;;EAEA;AACF;AACA;AACA;EACE,IAAIT,OAAOA,CAAA,EAAG;IACZ,OAAO,IAAI,CAACU,QAAQ;EACtB;;EAEA;AACF;AACA;AACA;AACA;EACE,OAAezB,WAAWA,CAACC,IAAY,EAAEC,OAAe,EAAE;IACxD,QAAQD,IAAI;MACV,KAAK,oBAAoB;QACvB,OAAO,IAAIT,eAAe,CAACM,cAAc,CAACI,OAAO,CAAC;MACpD,KAAK,0BAA0B;QAC7B,OAAO,IAAIV,eAAe,CAACwC,oBAAoB,CAAC9B,OAAO,CAAC;MAC1D,KAAK,sBAAsB;QACzB,OAAO,IAAIV,eAAe,CAACyC,gBAAgB,CAAC/B,OAAO,CAAC;MACtD,KAAK,mCAAmC;QACtC,OAAO,IAAIV,eAAe,CAACoC,6BAA6B,CAAC1B,OAAO,CAAC;MACnE,KAAK,iCAAiC;QACpC,OAAO,IAAIV,eAAe,CAAC0C,2BAA2B,CAAChC,OAAO,CAAC;MACjE,KAAK,uBAAuB;QAC1B,OAAO,IAAIV,eAAe,CAAC2C,iBAAiB,CAACjC,OAAO,CAAC;MACvD,KAAK,gCAAgC;QACnC,OAAO,IAAIV,eAAe,CAAC4C,0BAA0B,CAAClC,OAAO,CAAC;MAChE,KAAK,2BAA2B;QAC9B,OAAO,IAAIV,eAAe,CAAC6C,qBAAqB,CAACnC,OAAO,CAAC;MAC3D,KAAK,8BAA8B;QACjC,OAAO,IAAIV,eAAe,CAAC8C,wBAAwB,CAACpC,OAAO,CAAC;MAC9D,KAAK,mCAAmC;QACtC,OAAO,IAAIV,eAAe,CAAC+C,6BAA6B,CAACrC,OAAO,CAAC;MACnE,KAAK,uCAAuC;QAC1C,OAAO,IAAIV,eAAe,CAACgD,iCAAiC,CAACtC,OAAO,CAAC;MACvE,KAAK,qCAAqC;QACxC,OAAO,IAAIV,eAAe,CAACiD,+BAA+B,CAACvC,OAAO,CAAC;MACrE;QACE,MAAM,IAAIwC,KAAK,CAAE,oBAAmBzC,IAAK,cAAaC,OAAQ,EAAC,CAAC;IACpE;EACF;AACF;AAEA,eAAeP,SAAS"}