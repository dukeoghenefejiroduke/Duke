{
  "version": 3,
  "sources": ["../../@capacitor-community/bluetooth-le/src/conversion.ts"],
  "sourcesContent": ["/**\n * Convert an array of numbers into a DataView.\n */\nexport function numbersToDataView(value: number[]): DataView {\n  return new DataView(Uint8Array.from(value).buffer);\n}\n\n/**\n * Convert a DataView into an array of numbers.\n */\nexport function dataViewToNumbers(value: DataView): number[] {\n  return Array.from(new Uint8Array(value.buffer, value.byteOffset, value.byteLength));\n}\n\n/**\n * Convert a string into a DataView.\n */\nexport function textToDataView(value: string): DataView {\n  return numbersToDataView(value.split('').map((s) => s.charCodeAt(0)));\n}\n\n/**\n * Convert a DataView into a string.\n */\nexport function dataViewToText(value: DataView): string {\n  return String.fromCharCode(...dataViewToNumbers(value));\n}\n\n/**\n * Convert a 16 bit UUID into a 128 bit UUID string\n * @param value number, e.g. 0x180d\n * @return string, e.g. '0000180d-0000-1000-8000-00805f9b34fb'\n */\nexport function numberToUUID(value: number): string {\n  return `0000${value.toString(16).padStart(4, '0')}-0000-1000-8000-00805f9b34fb`;\n}\n\n/**\n * Convert a string of hex into a DataView of raw bytes.\n * Note: characters other than [0-9a-fA-F] are ignored\n * @param hex string of values, e.g. \"00 01 02\" or \"000102\"\n * @return DataView of raw bytes\n */\nexport function hexStringToDataView(hex: string): DataView {\n  const bin = [];\n  let i,\n    c,\n    isEmpty = 1,\n    buffer = 0;\n  for (i = 0; i < hex.length; i++) {\n    c = hex.charCodeAt(i);\n    if ((c > 47 && c < 58) || (c > 64 && c < 71) || (c > 96 && c < 103)) {\n      buffer = (buffer << 4) ^ ((c > 64 ? c + 9 : c) & 15);\n      if ((isEmpty ^= 1)) {\n        bin.push(buffer & 0xff);\n      }\n    }\n  }\n  return numbersToDataView(bin);\n}\n\nexport function dataViewToHexString(value: DataView): string {\n  return dataViewToNumbers(value)\n    .map((n) => {\n      let s = n.toString(16);\n      if (s.length == 1) {\n        s = '0' + s;\n      }\n      return s;\n    })\n    .join('');\n}\n\nexport function webUUIDToString(uuid: string | number): string {\n  if (typeof uuid === 'string') {\n    return uuid;\n  } else if (typeof uuid === 'number') {\n    return numberToUUID(uuid);\n  } else {\n    throw new Error('Invalid UUID');\n  }\n}\n\nexport function mapToObject<V>(map?: Map<string | number, V>): { [key: string]: V } | undefined {\n  const obj: { [key: string]: V } = {};\n  if (!map) {\n    return undefined;\n  }\n  map.forEach((value, key) => {\n    obj[key.toString()] = value;\n  });\n  return obj;\n}\n\n/**\n * Convert Data or Uint8Array to Uint8Array.\n * @param value DataView, Uint8Array, or undefined\n * @return Uint8Array or undefined\n */\nexport function toUint8Array(value: DataView | Uint8Array | undefined): Uint8Array | undefined {\n  if (value === undefined) {\n    return undefined;\n  }\n  if (typeof value === 'string') {\n    const dataView = hexStringToDataView(value);\n    return new Uint8Array(dataView.buffer, dataView.byteOffset, dataView.byteLength);\n  }\n  if (value instanceof DataView) {\n    return new Uint8Array(value.buffer, value.byteOffset, value.byteLength);\n  }\n  return value; // Already Uint8Array\n}\n\n/**\n * Convert Data, Uint8Array, or string to hex string.\n * @param value DataView, Uint8Array, or undefined\n * @return hex string or undefined\n */\nexport function toHexString(value: DataView | Uint8Array | undefined): string | undefined {\n  if (value === undefined) {\n    return undefined;\n  }\n  if (value instanceof DataView) {\n    return dataViewToHexString(value);\n  }\n  // Uint8Array\n  return dataViewToHexString(new DataView(value.buffer, value.byteOffset, value.byteLength));\n}\n"],
  "mappings": ";AAGM,SAAU,kBAAkB,OAAe;AAC/C,SAAO,IAAI,SAAS,WAAW,KAAK,KAAK,EAAE,MAAM;AACnD;AAKM,SAAU,kBAAkB,OAAe;AAC/C,SAAO,MAAM,KAAK,IAAI,WAAW,MAAM,QAAQ,MAAM,YAAY,MAAM,UAAU,CAAC;AACpF;AAKM,SAAU,eAAe,OAAa;AAC1C,SAAO,kBAAkB,MAAM,MAAM,EAAE,EAAE,IAAI,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC,CAAC;AACtE;AAKM,SAAU,eAAe,OAAe;AAC5C,SAAO,OAAO,aAAa,GAAG,kBAAkB,KAAK,CAAC;AACxD;AAOM,SAAU,aAAa,OAAa;AACxC,SAAO,OAAO,MAAM,SAAS,EAAE,EAAE,SAAS,GAAG,GAAG,CAAC;AACnD;AAQM,SAAU,oBAAoB,KAAW;AAC7C,QAAM,MAAM,CAAA;AACZ,MAAI,GACF,GACA,UAAU,GACV,SAAS;AACX,OAAK,IAAI,GAAG,IAAI,IAAI,QAAQ,KAAK;AAC/B,QAAI,IAAI,WAAW,CAAC;AACpB,QAAK,IAAI,MAAM,IAAI,MAAQ,IAAI,MAAM,IAAI,MAAQ,IAAI,MAAM,IAAI,KAAM;AACnE,eAAU,UAAU,KAAO,IAAI,KAAK,IAAI,IAAI,KAAK;AACjD,UAAK,WAAW,GAAI;AAClB,YAAI,KAAK,SAAS,GAAI;;;;AAI5B,SAAO,kBAAkB,GAAG;AAC9B;AAEM,SAAU,oBAAoB,OAAe;AACjD,SAAO,kBAAkB,KAAK,EAC3B,IAAI,CAAC,MAAK;AACT,QAAI,IAAI,EAAE,SAAS,EAAE;AACrB,QAAI,EAAE,UAAU,GAAG;AACjB,UAAI,MAAM;;AAEZ,WAAO;EACT,CAAC,EACA,KAAK,EAAE;AACZ;AAEM,SAAU,gBAAgB,MAAqB;AACnD,MAAI,OAAO,SAAS,UAAU;AAC5B,WAAO;aACE,OAAO,SAAS,UAAU;AACnC,WAAO,aAAa,IAAI;SACnB;AACL,UAAM,IAAI,MAAM,cAAc;;AAElC;AAEM,SAAU,YAAe,KAA6B;AAC1D,QAAM,MAA4B,CAAA;AAClC,MAAI,CAAC,KAAK;AACR,WAAO;;AAET,MAAI,QAAQ,CAAC,OAAO,QAAO;AACzB,QAAI,IAAI,SAAQ,CAAE,IAAI;EACxB,CAAC;AACD,SAAO;AACT;AAOM,SAAU,aAAa,OAAwC;AACnE,MAAI,UAAU,QAAW;AACvB,WAAO;;AAET,MAAI,OAAO,UAAU,UAAU;AAC7B,UAAM,WAAW,oBAAoB,KAAK;AAC1C,WAAO,IAAI,WAAW,SAAS,QAAQ,SAAS,YAAY,SAAS,UAAU;;AAEjF,MAAI,iBAAiB,UAAU;AAC7B,WAAO,IAAI,WAAW,MAAM,QAAQ,MAAM,YAAY,MAAM,UAAU;;AAExE,SAAO;AACT;AAOM,SAAU,YAAY,OAAwC;AAClE,MAAI,UAAU,QAAW;AACvB,WAAO;;AAET,MAAI,iBAAiB,UAAU;AAC7B,WAAO,oBAAoB,KAAK;;AAGlC,SAAO,oBAAoB,IAAI,SAAS,MAAM,QAAQ,MAAM,YAAY,MAAM,UAAU,CAAC;AAC3F;",
  "names": []
}
